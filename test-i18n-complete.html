<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete i18n Test - Fusiox</title>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .language-buttons { margin: 10px 0; }
        .language-buttons button { margin: 5px; padding: 8px 15px; cursor: pointer; }
        .active { background-color: #007bff; color: white; }
        .debug-info { background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 5px; }
        .translation-test { margin: 10px 0; padding: 10px; background: #e9ecef; border-radius: 3px; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>Complete i18n System Test</h1>
    
    <div class="test-section">
        <h2>Language Selector</h2>
        <div class="language-buttons">
            <button onclick="changeLanguage('en')" id="btn-en">English</button>
            <button onclick="changeLanguage('zh-Hant')" id="btn-zh-Hant">繁體中文</button>
            <button onclick="changeLanguage('zh-Hans')" id="btn-zh-Hans">简体中文</button>
        </div>
    </div>

    <div class="test-section">
        <h2>Translation Tests</h2>
        
        <div class="translation-test">
            <strong>Navigation:</strong>
            <p data-i18n="nav.about">About</p>
            <p data-i18n="nav.services">Services</p>
            <p data-i18n="nav.contact">Contact</p>
        </div>

        <div class="translation-test">
            <strong>Hero Section:</strong>
            <p data-i18n="hero.title">Welcome to Fusiox</p>
            <p data-i18n="hero.subtitle">Professional incorporation services that make starting your business simple, fast, and affordable.</p>
        </div>

        <div class="translation-test">
            <strong>Services:</strong>
            <p data-i18n="services.hero.title">Our Services</p>
            <p data-i18n="services.company-secretary.title">Company Secretary Service</p>
            <p data-i18n="services.registered-address.title">Registered Address and Mail Receiving</p>
        </div>

        <div class="translation-test">
            <strong>Footer:</strong>
            <p data-i18n="footer.company-name">Fusiox Corporate Services Limited</p>
            <p data-i18n="footer.copyright">2025 Fusiox Corporate Services Limited. All rights reserved.</p>
        </div>

        <div class="translation-test">
            <strong>Page Titles:</strong>
            <p data-i18n="page.title.services">Services - Fusiox</p>
            <p data-i18n="page.title.contact">Contact Us - Fusiox</p>
        </div>
    </div>

    <div class="test-section">
        <h2>Debug Information</h2>
        <div id="debug" class="debug-info">
            Loading debug information...
        </div>
    </div>

    <div class="test-section">
        <h2>Validation Results</h2>
        <div id="validation" class="debug-info">
            Running validation...
        </div>
    </div>

    <script src="assets/js/i18n.js"></script>
    <script>
        function changeLanguage(lang) {
            if (window.i18n) {
                window.i18n.setLanguage(lang);
                updateDebug();
                updateButtons();
            }
        }

        function updateButtons() {
            const currentLang = window.i18n ? window.i18n.currentLanguage : 'en';
            document.querySelectorAll('.language-buttons button').forEach(btn => {
                btn.classList.remove('active');
                if (btn.id === `btn-${currentLang}`) {
                    btn.classList.add('active');
                }
            });
        }

        function updateDebug() {
            const debug = document.getElementById('debug');
            if (window.i18n) {
                const elements = document.querySelectorAll('[data-i18n]');
                const translatedElements = Array.from(elements).map(el => {
                    const key = el.getAttribute('data-i18n');
                    const translation = window.i18n.translate(key);
                    return { key, translation, element: el.textContent };
                });

                debug.innerHTML = `
                    <strong>i18n Status:</strong> ✅ Available<br>
                    <strong>Current Language:</strong> ${window.i18n.currentLanguage}<br>
                    <strong>Stored Language:</strong> ${localStorage.getItem('fusiox-language') || 'none'}<br>
                    <strong>Elements with data-i18n:</strong> ${elements.length}<br>
                    <strong>Available Languages:</strong> ${Object.keys(window.i18n.translations).join(', ')}<br>
                    <br>
                    <strong>Sample Translations:</strong><br>
                    ${translatedElements.slice(0, 5).map(item => 
                        `${item.key}: "${item.translation}"`
                    ).join('<br>')}
                `;
            } else {
                debug.innerHTML = '<span class="error">❌ i18n not available</span>';
            }
        }

        function updateValidation() {
            const validation = document.getElementById('validation');
            if (window.i18n) {
                const missing = window.i18n.validateTranslations();
                let validationHtml = '<strong>Translation Validation:</strong><br>';
                
                Object.keys(missing).forEach(lang => {
                    if (missing[lang].length > 0) {
                        validationHtml += `<span class="error">❌ ${lang}: ${missing[lang].length} missing translations</span><br>`;
                    } else {
                        validationHtml += `<span class="success">✅ ${lang}: Complete</span><br>`;
                    }
                });
                
                validation.innerHTML = validationHtml;
            } else {
                validation.innerHTML = '<span class="error">❌ i18n not available for validation</span>';
            }
        }

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                updateDebug();
                updateValidation();
                updateButtons();
            }, 500);
        });

        // Also update after a delay to catch any late initialization
        setTimeout(() => {
            updateDebug();
            updateValidation();
            updateButtons();
        }, 1000);
    </script>
</body>
</html> 